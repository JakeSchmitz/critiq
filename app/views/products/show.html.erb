<%- model_class = Product -%>
<div class="product-header" style="background-image: url('<%= @product.pictures.first.attachment.url(:large) %>');"><div class="black-wrapper"></div></div>
<div>
  <div class="row" style="width: 100%;">
    <div class="span9" style="padding-left: 50px; padding-right: 50px;">
      <h1 class="product-name"><%= @product.name %></h1>
      <div class="product-creator">
        <div class="img-circle creator-face" style="background-image: url('<%= @product.user.profile_pic.attachment.url(:medium) %>');"></div>
        <div class="creator-data">
          <h4>Created By <%= @product.user.name %></h4>
        </div>
        <div class="product-buttons">
          <% if signed_in? and !@product.likes.exists?(:user_id => current_user.id) %>
            <%= button_to 'Support', product_love_path(@product.id), :method => "get", :class => "btn-clear inline-button"%>
          <% end %>
          <% if signed_in? and current_user.id == @product.user.id %>
            <%= button_to 'Edit', edit_product_path(@product.id), :method => "get", :class => "btn-clear inline-button"%>
            <%= button_to 'Delete', product_path(@btn), :method => 'delete', :class => "btn-clear inline-button"%>
          <% end %>
        </div>
      </div>
      <div style="display: inline">
        <div class="product-pictures">
          <% if !@product.pictures.empty? %>
            <div class="main-pic span6" style="background-image: url('<%= @product.product_pic.attachment.url(:large) %>');"></div>
            <div class="other-pics span2 pull-left">
              <% @top_pics.each do |pic| %>
                <div class="alt-pic span2 thumb-ratio" style="background-image: url('<%= pic.attachment.url(:thumb) %>')"></div>
              <% end %>
            </div>
          <% else %>
            <%= image_tag "/images/missing-image.jpg" %>
          <% end %> 
        </div>
      </div>
    </div>
    <div class="product-right">
      <h2>Description</h2>
      <p class="product-description"><%= @product.description %></p>
      <h2>Featured Rewards</h2>
      <p>TBA</p>
    </div>
  </div>
</div>
<ul class="nav nav-tabs product-nav" id="product-tabs">
  <li style="margin-left: 5%;"><a href="#product-features" data-toggle="tab"><i class="fa fa-cogs"></i> Features</a></li>
  <li><a href="#product-comments" data-toggle="tab"><i class="fa fa-comments"></i> Comments</a></li>
  <li><a href="#product-likers" data-toggle="tab"><i class="fa fa-star"></i> Likers</a></li>
</ul>
<div class="container">
  <div class="row span12 product-middle">
    <div class="tab-content">
      <div class="tab-pane row span11" id="product-features">
        <%= render :partial => 'product_features' %>
      </div>
      <div class="tab-pane row span11" id="product-comments">
        <%= render :partial => '/comments/form' %>
        <% if !@product.comments.empty? %> 
          <div style="padding-top: 20px; padding-left: 30px;">
            <%= render :partial => 'product_comments' %>
          </div>
        <% else %>
          <h2>Product Has No Comments!</h2>
        <% end %>
      </div>
      <div class="tab-pane row span12" id="product-likers">
        <%= render :partial => 'product_likers' %>
      </div>
    </div>
  </div>
</div>

<script>
  $(function () {
    $('#product-tabs a[href="#product-features"]').tab('show')
  })
</script>
